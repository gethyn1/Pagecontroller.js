!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/Users/gethynjones/Sites/_jsdev/pagecontroller.js/dist",t(0)}([function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var i=n(1),r=o(i),a=n(2),l=l||{};l.pageInit=function(){console.log("Initialised the app"),l.onPageLoaded()},l.pageLoaderEl=document.getElementsByTagName("body")[0],l.onPageLoaded=function(){setTimeout(function(){r.removeClass(l.pageLoaderEl,"is-page-loading"),l.pageLoaderEl.className+=" is-page-loaded"},400)},l.pageLoader=new a.Pagecontroller({loaderClass:"page-loader",onLoadRequest:function(){r.removeClass(l.pageLoaderEl,"is-page-loaded"),l.pageLoaderEl.className+=" is-page-loading",setTimeout(function(){window.scrollTo(0,0)},400)},onLoadSuccess:function(){l.pageInit()}}),l.pageLoader.init(),l.pageInit()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=t.toggleGrid=function(e,t){t.classList.toggle("is-visible"),e.preventDefault()};t.initToggler=function(e,t){t.addEventListener("click",function(t){o(t,e)},!1)},t.hasClass=function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},t.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},t.toggleClass=function(e,t){if(e.classList)e.classList.toggle(t);else{var n=e.className.split(" "),o=n.indexOf(t);o>=0?n.splice(o,1):n.push(t),e.className=n.join(" ")}},t.wrap=function(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)},t.wrapAll=function(e,t){e[0].parentNode.insertBefore(t,e[0]);for(var n=0;n<e.length;n++)t.appendChild(e[n])},t.throttle=function(e,t){t=t||42;var n=!1,o=void 0;return function(){n||(n=!0,clearTimeout(o),o=setTimeout(function(){e.call(),n=!1},t))}},t.getPosition=function(e,t){for(var n=0,o=0;e;){if("BODY"==e.tagName){var i=t?e.scrollLeft||document.documentElement.scrollLeft:0,r=t?e.scrollTop||document.documentElement.scrollTop:0;n+=e.offsetLeft-i+e.clientLeft,o+=e.offsetTop-r+e.clientTop}else t?(n+=e.offsetLeft-e.scrollLeft+e.clientLeft,o+=e.offsetTop-e.scrollTop+e.clientTop):(n+=e.offsetLeft+e.clientLeft,o+=e.offsetTop+e.clientTop);e=e.offsetParent}return{x:n,y:o}},t.browserWidth=function(){return self.innerHeight?self.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:void 0},t.browserHeight=function(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0},t.toArray=function(e){for(var t=[],n=e.length>>>0;n--;)t[n]=e[n];return t},t.next=function(e){for(var t=e.nextSibling;t&&1!=t.nodeType;)t=t.nextSibling;return t},t.each=function(e,t){Array.prototype.forEach.call(e,t)},t.once=function(e,t,n){e.addEventListener(t,function(e){return e.target.removeEventListener(e.type,arguments.callee),n(e)})},t.serializeToJson=function(e){var t=void 0,o=[],i={};if("object"==("undefined"==typeof e?"undefined":n(e))&&"FORM"==e.nodeName)for(var r=e.elements.length,a=0;a<r;a++)if(t=e.elements[a],t.name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type)for(var l=e.elements[a].options.length-1;l>=0;l--)t.options[l].selected&&(o[o.length]=encodeURIComponent(t.name)+"="+encodeURIComponent(t.options[l].value));else("checkbox"!=t.type&&"radio"!=t.type||t.checked)&&(o[o.length]=encodeURIComponent(t.name)+"="+encodeURIComponent(t.value));return o.forEach(function(e,t){var n=e.split("=");i[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}),i},t.getQueryParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pagecontroller=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=o(a),s=function(){function e(t){if(i(this,e),!t)throw new Error("Please provide options for page controller");this.onLoadRequest=t.onLoadRequest||function(){},this.onLoadSuccess=t.onLoadSuccess||function(){},this.afterPageLoad=t.afterPageLoad||function(){},this.loadDelay=t.loadDelay||600,this._links=!1,this._body=document.getElementsByTagName("body")[0],this._loaderClass=t.loaderClass,this._pageLoader=document.getElementsByClassName(t.loaderClass)[0],this._fallbackTimer=1e4,this._handlerArr=[]}return r(e,[{key:"init",value:function(){var e=this;if(this.addLinkListeners(),"undefined"==typeof event){var t=window.location.href;history.replaceState({url:t},"",t)}window.addEventListener("popstate",e.popStateHandler.bind(e))}},{key:"addLinkListeners",value:function(){var e=this;this._links&&l.each(this._links,function(t,n){t.removeEventListener("click",e._handlerArr[n],!1)}),this._links=document.getElementsByTagName("a"),e._handlerArr=[],l.each(this._links,function(t,n){if(e.isInternalLink(t)){var o=e.loadPage.bind(e,t.href);e._handlerArr.push(o),t.addEventListener("click",o,!1)}})}},{key:"loadPage",value:function(e,t){var n=this,o=null;this.onLoadRequest.call();var i=new XMLHttpRequest;i.open("GET",e,!0),o=setTimeout(function(){window.location.href=e},this._fallbackTimer),i.onload=function(){i.status>=200&&i.status<400?!function(){clearTimeout(o);var r=i.responseText,a=document.createElement("div");setTimeout(function(){a.innerHTML=r;var o=a.getElementsByClassName(n._loaderClass)[0].innerHTML,i=a.querySelectorAll("title")[0].innerHTML,l=a.querySelectorAll('[name="description"]')[0].innerHTML;document.title=i,document.description=l,n.onAjaxSuccess(o),t&&n.pushStateHandler(e)},n.loadDelay)}():window.location.href=e},i.onerror=function(){window.location.href=e},i.send(),t&&t.preventDefault()}},{key:"pushStateHandler",value:function(e){history.pushState({url:e},"",e)}},{key:"popStateHandler",value:function(){event.state&&this.loadPage(event.state.url,!1)}},{key:"onAjaxSuccess",value:function(e){this._pageLoader.innerHTML="",this._pageLoader.innerHTML=e,this.onLoadSuccess.call(),this.addLinkListeners()}},{key:"isInternalLink",value:function(e){return e.host===window.location.host&&e.href.indexOf("email-protection")<0}}]),e}();t.Pagecontroller=s}]);